Библиотека элементов программного интерфейса для обработки графов
=================================================================



Принципы обработки графовых моделей для системы с набором дискретной матиматики
===============================================================================



# Графовые модели для системы с набором дискретной матиматики


## 1 Модель для оринтированного остовного графа

Данная модель подходит для невзваешанных оринтированных остовных графов и 
обычных оринтированных графов, у которых нельзя двумя и более ребрами 
соединить две одинаковых вершины. 
Модель использует всего одну SPU структуру:

```
| Ключ                            | Значение       |
| ------------------------------- | -------------- |
| id вершины | id смежной вершины |                |
| -----------| -------------------| -------------- |
|            | 0..0               | Данные вершины | 
```

Структура хранит смежные вершины. 
Старший аргумент ключа является идентификатор вершины, 
а младший - идентификатор смежной вершины. 
Данные вершины хранится в значении для записи с ключом, 
у которого аргумент `id вершины` соответствует этой вершине 
и аргумент `id смежной вершины` равен 0.

**Ограничения:** 
1. Идентификаторы вершин не должны быть равны 0.
2. Нельзя двумя и более ребрами соединить две одинаковых вершины.


## 2 Модель для взвешанного оринтированного остовного графа

Данная модель подходит для взваешанных оринтированных остовных графов и 
обычных оринтированных графов, у которых нельзя двумя и более ребрами 
с одинаковыми весами соединить две одинаковых вершины. 
Модель использует всего одну SPU структуру:

```
| Ключ                                  | Значение       |
| ---------- + --- + ------------------ + -------------- |
| id вершины | Вес | id смежной вершины |                |
| ---------- + --- + ------------------ + -------------- |
|            | 0..0                     | Данные вершины | 
```

Структура хранит смежные вершины. 
Старший аргумент ключа является идентификатор вершины, 
а младший - идентификатор смежной вершины. 
Данные вершины хранится в значении для записи с ключом, 
у которого аргумент `id вершины` соответствует этой вершине 
и аргумент `id смежной вершины` равен 0.

**Ограничения:** 
1. Идентификаторы вершин не должны быть равны 0.
2. Нельзя двумя и более ребрами с одинаковыми весами соединить две одинаковых вершины.
3. Вес представлен целым положительным числом.


## 2 Модель для оринтированного графа

Модель подходит для невзваешанных оринтированных графов 
и использует одну структуру SPU: 

```
| Ключ                                       | Значение       |
| ------------------------------------------ | -------------- |
| id вершины | id ребра | id смежной вершины |                |
| -----------| ------------------------------| -------------- |
|            | 0..0                          | Данные вершины | 
```

Структура хранит смежные вершины. 
Старший аргумент ключа является идентификатор вершины, 
второй - идентификотор ребра,
а младший - идентификатор смежной вершины. 
Данные вершины хранится в значении для записи с ключом, 
у которого аргумент `id вершины` соответствует этой вершине, 
а остальные аргументы равны 0.

**Ограничения:** Идентификаторы вершин не должны быть равны 0.



## 3 Модель для гиперграфа

Данная модель подходит для гиперграфов и использует 2 структуры SPU:

1.  **Связь вершина -> ребро.** 

    ```
    | Ключ                  | Значение       |
    | --------------------- | -------------- |
    | id вершины | id ребра |                |
    | -----------| ---------| -------------- |
    |            | 0..0     | Данные вершины | 
    ```

    Структура хранит вершины и исходящие из них ребра. 
    По этой структуре происходит поиск смежных ребер для указанной вершины.
    Старший аргумент ключа является идентификатор вершины, 
    а младший - идентификатор смежного ребра. 
    Данные вершины хранится в значении для записи с ключом, 
    у которого аргумент `id вершины` соответствует этой вершине 
    и аргумент `id ребра` равен 0.

2.  **Связь ребро -> вершина.**

    ```
    | Ключ                  | Значение  |
    | --------------------- | --------- |
    | id ребра | id вершины |           |
    | ---------| -----------| --------- |
    |          | 0..0       | Вес ребра | 
    ```
    
    Структура хранит ребра и вершины, в которые входят эти ребра. 
    По этой структуре происходит поиск смежных вершин для указанного ребра.
    Старший аргумент ключа является идентификатор ребра, 
    а младший - идентификатор смежной вершины. 
    
    Для взвешанных графов в значении для записи с ключом, 
    у которого аргумент `id ребра` соответствует указанному ребру,
    а аргумент `id вершины` равен 0, значение будет соответствовать весу ребра.
    Таким образом, модель будет обеспечивать быстрое изменение веса ребра,
    однако, чтобы получить ребро с минимальны весом, придется вытащить все ребра
    и найти среди них ребро с минимальным весом.

Может показаться, что если в первой структуре размещать исходящие из вершины ребра,
а во второй - входящие в вершину ребра, то модель будет подходить для ультрографов.
Однако, в таком случае нельзя по вершине будет найти все входящие в неё ребра.

**Ограничения:** Идентификаторы вершины и ребра не должны быть равны 0.



## 3 Модель для ультраграфа

Данная модель подходит для ультрарафов и использует 2 структуры SPU:

1.  **Связь вершина -> ребро.** 

    ```
    | Ключ                                     | Значение       |
    | ---------------- | ---------- | -------- | -------------- |
    | Бит инцидетности | id вершины | id ребра |                |
    | ---------------- | ---------- | -------- | -------------- |
    | 0                |            | 0..0     | Данные вершины | 
    ```

    Структура хранит вершины и исходящие из них ребра. 
    По этой структуре происходит поиск смежных ребер для указанной вершины.
    Старший бит ключа (`Бит инцидетности`) показывает является ли 
    данное ребро входящим или исходящим (0 - входящее, 1 - исходящее),
    второй аргумент ключа является идентификатор вершины, 
    а младший аргумент - идентификатор смежного ребра. 
    Данные вершины хранится в значении для записи с ключом, 
    у которого аргумент `id вершины` соответствует этой вершине 
    и аргумент `id ребра` равен 0.

2.  **Связь ребро -> вершина.**

    ```
    | Ключ                                     | Значение  |
    | ---------------- | -------- | ---------- | --------- |
    | Бит инцидетности | id ребра | id вершины |           |
    | ---------------- | -------- | ---------- | --------- |
    | 0                |          | 0..0       | Вес ребра | 
    ```
    
    Структура хранит ребра и вершины, в которые входят эти ребра. 
    По этой структуре происходит поиск смежных вершин для указанного ребра.
    Старший бит ключа (`Бит инцидетности`) показывает является ли 
    данное ребро входящим или исходящим (0 - входящее, 1 - исходящее),
    второй аргумент ключа является идентификатор ребра, 
    а младший аргумент - идентификатор смежной вершины. 
    
    Для взвешанных графов в значении для записи с ключом, 
    у которого аргумент `id ребра` соответствует указанному ребру,
    а аргумент `id вершины` равен 0, значение будет соответствовать весу ребра.
    Таким образом, модель будет обеспечивать быстрое изменение веса ребра,
    однако, чтобы получить ребро с минимальны весом, придется вытащить все ребра
    и найти среди них ребро с минимальным весом.
    
**Ограничения:** Идентификаторы вершины и ребра не должны быть равны 0.



## 4 Модель для взвешанного ультраграфа

Данная модель подходит для взвешанных ультрарафов и использует 2 структуры SPU:

1.  **Связь вершина -> ребро.** 

    ```
    | Ключ                                                 | Значение               |
    | ---------------- + ---------- + --------- + -------- + ---------------------- |
    | Бит инцидетности | id вершины | Вес ребра | id ребра |                        |
    | ---------------- + ---------- + --------- + -------- + ---------------------- |
    | 0                |            | 0..0                 | Данные вершины         | 
    | 0                |            | 1..1                 | Кол-во входящих ребер  | 
    | 1                |            | 1..1                 | Кол-во исходящих ребер |
    | 0                | 0..0                              | Общее кол-во вершин    |  
    ```

    Структура хранит вершины и исходящие из них ребра. 
    По этой структуре происходит поиск смежных ребер для указанной вершины.
    Старший бит ключа (`Бит инцидетности`) показывает является ли 
    данное ребро входящим или исходящим (0 - входящее, 1 - исходящее),
    второй аргумент ключа является идентификатор вершины, 
    третий - вес ребра,
    а младший аргумент - идентификатор смежного ребра. 
    Данные вершины хранится в значении для записи с ключом, 
    у которого аргумент `id вершины` соответствует этой вершине 
    и аргумент `id ребра` равен 0.
    
    Чтобы не пересчитывать количество смежных ребер предлагается для записи 
    с битом инцидетности равным 0 и старшими аргументами (`Вес ребра` и `id ребра`),
    у которых биты равны 1, хранить количество входящих ребер, а для записи 
    с битом инцидетности равным 1 хранить количество исходящих ребер.
    
    По адресу 0 хранится общее количество вершин.

2.  **Связь ребро -> вершина.**

    ```
    | Ключ                                     | Значение                             |
    | ---------------- + -------- + ---------- + ------------------------------------ |
    | Бит инцидетности | id ребра | id вершины |                                      |
    | ---------------- + -------- + ---------- + ------------------------------------ |
    | 0                |          | 0..0       | Вес ребра                            | 
    | 0                |          | 1..1       | Кол-во вершин, в кот. входит ребро   | 
    | 1                |          | 1..1       | Кол-во вершин, из кот. выходит ребро |
    | 0                | 0..0                  | Общее количество ребер               | 
    ```
    
    Структура хранит ребра и вершины, в которые входят эти ребра. 
    По этой структуре происходит поиск смежных вершин для указанного ребра.
    Старший бит ключа (`Бит инцидетности`) показывает является ли 
    данное ребро входящим или исходящим (0 - входящее, 1 - исходящее),
    второй аргумент ключа является идентификатор ребра, 
    а младший аргумент - идентификатор смежной вершины. 
    
    Для взвешанных графов в значении для записи с ключом, 
    у которого аргумент `id ребра` соответствует указанному ребру,
    а аргумент `id вершины` равен 0, значение будет соответствовать весу ребра.
    
    Чтобы не пересчитывать количество смежных вершин предлагается для записи 
    с битом инцидетности равным 0 и старшими аргументами (`Вес ребра` и `id ребра`),
    у которых биты равны 1, хранить количество вершин, из которых выходит ребро,
    а для записи с битом инцидетности равным 1 хранить количество вершин, 
    в которое входит ребро.
    
    По адресу 0 хранится общее количество ребер.

Отличие данной модели от предыдущей - в первую SPU структуру был добавлен аргумент `Вес ребра`,
благодаря которому, будет осуществлятся быстрый поиск ребер вершины 
с минимальным / максимальным весом. Однако для изменения веса у ребра 
придется пробежаться по всем связям *вершина -> ребро* и у каждой изменить вес.
    
**Ограничения:** Идентификаторы вершины и ребра не должны быть равны 0, 
а также не все биты идентификаторов не должны быть равными 1.

Эта графовая модель для системы с набором дискретной матиматик наиболее универсальна
и будет выбрана в качестве реализации в библиотеки элементов программного интерфейса 
для обработки графов.
